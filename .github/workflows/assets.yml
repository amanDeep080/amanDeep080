name: Assets

on:
schedule:
- cron: "15 0 * * *" # daily
workflow_dispatch:

permissions:
contents: write

jobs:
build:
name: Generate self-hosted SVG assets
runs-on: ubuntu-latest

steps:
  - name: Checkout
    uses: actions/checkout@v4

  - name: Setup Node
    uses: actions/setup-node@v4
    with:
      node-version: "20"

  - name: Generate assets
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      GH_USERNAME: amanDeep080
    run: node scripts/generate-assets.mjs

  - name: Publish to assets branch
    uses: crazy-max/ghaction-github-pages@v4
    with:
      target_branch: assets
      build_dir: dist
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
